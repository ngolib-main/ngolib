{"ast":null,"code":"import _objectSpread from\"/home/javi/Server/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useRef,useState}from\"react\";import styles from'../../style/page/profile.module.css';import{displayedSectionsUser,displayedSectionsNGO}from\"./displaySections\";import Header from\"../reusable/Header\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Profile=()=>{// State: which accordion indexes are open\nconst[openSections,setOpenSections]=useState([]);// State: fetched profile data (user or NGO and related arrays)\nconst[PersonalInfo,setPersonalInfo]=useState(null);// Ref: hidden file input to trigger click when \"Add picture\" pressed\nconst fileInputRef=useRef(null);// Fetch profile data once on mount\nuseEffect(()=>{const fetchProfile=async()=>{try{const response=await fetch(\"/api/profile\",{method:\"GET\",credentials:\"include\",headers:{\"Content-Type\":\"application/json\"}});const data=await response.json();console.log(\"Profile data:\",data);setPersonalInfo(data);}catch(error){alert(\"Something went wrong, try again later\");}};fetchProfile();},[]);const handlePhotoClick=()=>{fileInputRef.current.click();};// Handler: on file selected → read Base64 → POST to server\nconst handleFileChange=e=>{const file=e.target.files[0];if(!file)return alert(\"Wrong file — try again\");const reader=new FileReader();reader.onload=async()=>{const imageBase64=reader.result;try{const res=await fetch(\"/api/profile/image\",{method:\"POST\",credentials:\"include\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({imageBase64})});if(!res.ok){const err=await res.json().catch(()=>({}));throw new Error(err.message||\"Upload failed\");}await res.json();alert(\"Upload successful\");// Update image in local state so UI refreshes immediately\nsetPersonalInfo(prev=>_objectSpread(_objectSpread({},prev),{},{image:imageBase64}));}catch(uploadError){console.error(\"Error uploading image:\",uploadError);alert(\"Error uploading image: \"+uploadError.message);}};reader.readAsDataURL(file);};// Handler: toggle accordion open/closed\nconst toggleSection=index=>{setOpenSections(prev=>prev.includes(index)?prev.filter(i=>i!==index):[...prev,index]);};// Loading state until data arrives\nif(!PersonalInfo){return/*#__PURE__*/_jsxs(\"div\",{className:styles.loadingWrapper,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.spinner}),/*#__PURE__*/_jsx(\"p\",{className:styles.loadingText,children:\"Loading profile data...\"})]});}// Determine user vs NGO\nconst user=PersonalInfo.user||{};const userType=user.type||\"NGO\";// default to NGO\nconst isUser=userType===\"user\";// Pick accordion sections based on type\nconst displayedSections=isUser?displayedSectionsUser:displayedSectionsNGO;// Handlers for unfollow/unsubscribe:\n// these update state without refetching all data\nconst handleUnfollow=async ngoId=>{try{const res=await fetch(\"/api/profile/unfollow\",{method:\"DELETE\",credentials:\"include\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({ngoId})});if(!res.ok)throw new Error((await res.json()).message||\"Failed to unfollow\");setPersonalInfo(prev=>_objectSpread(_objectSpread({},prev),{},{followings:(prev.followings||[]).filter(f=>f.ngo_id!==ngoId)}));alert(\"You have unfollowed the NGO.\");}catch(err){console.error(err);}};// these update state without refetching all dat\nconst handleUnsubscribe=async ngoId=>{try{await fetch(\"/api/profile/unsubscribe\",{method:\"DELETE\",credentials:\"include\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({ngoId})});setPersonalInfo(prev=>_objectSpread(_objectSpread({},prev),{},{subscriptions:(prev.subscriptions||[]).map(sub=>sub.ngo_id===ngoId?_objectSpread(_objectSpread({},sub),{},{status:\"canceled\"}):sub)}));alert(\"You have unsubscribed from the NGO.\");}catch(err){console.error(err);}};// Render user/NGO basic info\nconst renderPersonalInfo=()=>{if(isUser){return/*#__PURE__*/_jsxs(\"div\",{className:styles.info,children:[/*#__PURE__*/_jsx(\"h2\",{children:user.username}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Email: \",user.email]})]});}// NGO: may return 'user' as array, so handle both\nconst org=Array.isArray(PersonalInfo.user)?PersonalInfo.user[0]:PersonalInfo.user;return/*#__PURE__*/_jsxs(\"div\",{className:styles.info,children:[/*#__PURE__*/_jsx(\"h2\",{children:org.name||\"Unnamed NGO\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Contact: \",org.contact_email||\"No contact\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Link:\",' ',org.website_url?/*#__PURE__*/_jsx(\"a\",{href:org.website_url,target:\"_blank\",rel:\"noreferrer\",children:\"Visit site\"}):\"No link\"]})]});};return/*#__PURE__*/_jsxs(\"div\",{className:styles.page,children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:styles.profileWrapper,children:[/*#__PURE__*/_jsxs(\"aside\",{className:styles.leftSideBar,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.photoSection,children:[/*#__PURE__*/_jsx(\"img\",{className:styles.profilePic,src:PersonalInfo.image||\"ngo_icon.png\",alt:\"Profile\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",ref:fileInputRef,onChange:handleFileChange,accept:\"image/*\",style:{display:'none'}}),/*#__PURE__*/_jsx(\"button\",{className:styles.uploadButton,onClick:handlePhotoClick,children:\"Add picture\"})]}),/*#__PURE__*/_jsx(\"div\",{className:styles.informationContainer,children:renderPersonalInfo()})]}),/*#__PURE__*/_jsx(\"section\",{className:styles.rightSideBar,children:displayedSections.map((section,index)=>{// Determine which array to use for each section index\nlet data=[];if(index===0)data=PersonalInfo.followings||[];if(index===1)data=isUser?PersonalInfo.subscriptions||[]:PersonalInfo.followers||[];if(index===2)data=PersonalInfo.donations||[];if(index===3)data=PersonalInfo.post_volunt||[];const isOpen=openSections.includes(index);return/*#__PURE__*/_jsxs(\"div\",{className:styles.accordionSection,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.accordionTitle,onClick:()=>toggleSection(index),children:section.title}),/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(styles.accordionContent,\" \").concat(isOpen?styles.open:''),children:/*#__PURE__*/_jsxs(\"ul\",{children:[index===3&&/*#__PURE__*/_jsx(\"li\",{className:styles.linkWrapper,children:/*#__PURE__*/_jsx(\"a\",{href:\"/post-volunteer\",className:styles.linkRedirect,children:\"Create new volunteering post\"})}),data.length>0?data.map((item,i)=>/*#__PURE__*/_jsxs(\"li\",{className:styles.followerItem,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.followerInfo,children:[/*#__PURE__*/_jsx(\"strong\",{children:item.ngo_name||item.username||item.name||item.title}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'0.85rem',fontWeight:'bold',color:item.status==='active'?'green':'red'},children:item.status})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.followerActions,children:[item.amount!=null&&/*#__PURE__*/_jsx(\"span\",{children:\"\".concat(item.amount,\" \\u20AC\")}),index===0&&/*#__PURE__*/_jsx(\"button\",{className:styles.unfollowButton,onClick:()=>handleUnfollow(item.ngo_id),children:\"Unfollow\"}),index===1&&isUser&&item.status!=='canceled'&&/*#__PURE__*/_jsx(\"button\",{className:styles.unfollowButton,onClick:()=>handleUnsubscribe(item.ngo_id),children:\"Unsubscribe\"})]})]},i)):section.item?/*#__PURE__*/_jsx(\"li\",{className:styles.linkWrapper,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.linkContent,children:[/*#__PURE__*/_jsx(\"p\",{children:section.item.text}),/*#__PURE__*/_jsx(\"a\",{href:section.item.href,className:styles.linkRedirect,children:\"Edit my page\"})]})}):/*#__PURE__*/_jsx(\"li\",{children:\"Nothing yet\"})]})})]},index);})})]})]});};export default Profile;","map":{"version":3,"names":["React","useEffect","useRef","useState","styles","displayedSectionsUser","displayedSectionsNGO","Header","jsx","_jsx","jsxs","_jsxs","Profile","openSections","setOpenSections","PersonalInfo","setPersonalInfo","fileInputRef","fetchProfile","response","fetch","method","credentials","headers","data","json","console","log","error","alert","handlePhotoClick","current","click","handleFileChange","e","file","target","files","reader","FileReader","onload","imageBase64","result","res","body","JSON","stringify","ok","err","catch","Error","message","prev","_objectSpread","image","uploadError","readAsDataURL","toggleSection","index","includes","filter","i","className","loadingWrapper","children","spinner","loadingText","user","userType","type","isUser","displayedSections","handleUnfollow","ngoId","followings","f","ngo_id","handleUnsubscribe","subscriptions","map","sub","status","renderPersonalInfo","info","username","email","org","Array","isArray","name","contact_email","website_url","href","rel","page","profileWrapper","leftSideBar","photoSection","profilePic","src","alt","ref","onChange","accept","style","display","uploadButton","onClick","informationContainer","rightSideBar","section","followers","donations","post_volunt","isOpen","accordionSection","accordionTitle","title","concat","accordionContent","open","linkWrapper","linkRedirect","length","item","followerItem","followerInfo","ngo_name","fontSize","fontWeight","color","followerActions","amount","unfollowButton","linkContent","text"],"sources":["/home/javi/Server/src/components/profile/Profile.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport styles from '../../style/page/profile.module.css';\r\nimport { displayedSectionsUser, displayedSectionsNGO } from \"./displaySections\";\r\nimport Header from \"../reusable/Header\";\r\n\r\nconst Profile = () => {\r\n    // State: which accordion indexes are open\r\n    const [openSections, setOpenSections] = useState([]);\r\n    // State: fetched profile data (user or NGO and related arrays)\r\n    const [PersonalInfo, setPersonalInfo] = useState(null);\r\n    // Ref: hidden file input to trigger click when \"Add picture\" pressed\r\n    const fileInputRef = useRef(null);\r\n\r\n    // Fetch profile data once on mount\r\n    useEffect(() => {\r\n        const fetchProfile = async () => {\r\n            try {\r\n                const response = await fetch(\"/api/profile\", {\r\n                    method: \"GET\",\r\n                    credentials: \"include\",\r\n                    headers: { \"Content-Type\": \"application/json\" },\r\n                });\r\n                const data = await response.json();\r\n                console.log(\"Profile data:\", data);\r\n                setPersonalInfo(data);\r\n            } catch (error) {\r\n                alert(\"Something went wrong, try again later\");\r\n            }\r\n        };\r\n        fetchProfile();\r\n    }, []);\r\n\r\n\r\n    const handlePhotoClick = () => {\r\n        fileInputRef.current.click();\r\n    };\r\n\r\n    // Handler: on file selected → read Base64 → POST to server\r\n    const handleFileChange = (e) => {\r\n        const file = e.target.files[0];\r\n        if (!file) return alert(\"Wrong file — try again\");\r\n\r\n        const reader = new FileReader();\r\n        reader.onload = async () => {\r\n            const imageBase64 = reader.result;\r\n            try {\r\n                const res = await fetch(\"/api/profile/image\", {\r\n                    method: \"POST\",\r\n                    credentials: \"include\",\r\n                    headers: { \"Content-Type\": \"application/json\" },\r\n                    body: JSON.stringify({ imageBase64 }),\r\n                });\r\n                if (!res.ok) {\r\n                    const err = await res.json().catch(() => ({}));\r\n                    throw new Error(err.message || \"Upload failed\");\r\n                }\r\n                await res.json();\r\n                alert(\"Upload successful\");\r\n                // Update image in local state so UI refreshes immediately\r\n                setPersonalInfo(prev => ({ ...prev, image: imageBase64 }));\r\n            } catch (uploadError) {\r\n                console.error(\"Error uploading image:\", uploadError);\r\n                alert(\"Error uploading image: \" + uploadError.message);\r\n            }\r\n        };\r\n        reader.readAsDataURL(file);\r\n    };\r\n\r\n    // Handler: toggle accordion open/closed\r\n    const toggleSection = (index) => {\r\n        setOpenSections(prev =>\r\n            prev.includes(index)\r\n                ? prev.filter(i => i !== index)\r\n                : [...prev, index]\r\n        );\r\n    };\r\n\r\n    // Loading state until data arrives\r\n    if (!PersonalInfo) {\r\n        return (\r\n            <div className={styles.loadingWrapper}>\r\n                <div className={styles.spinner}></div>\r\n                <p className={styles.loadingText}>Loading profile data...</p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Determine user vs NGO\r\n    const user = PersonalInfo.user || {};\r\n    const userType = user.type || \"NGO\"; // default to NGO\r\n    const isUser = userType === \"user\";\r\n\r\n    // Pick accordion sections based on type\r\n    const displayedSections = isUser ? displayedSectionsUser : displayedSectionsNGO;\r\n\r\n    // Handlers for unfollow/unsubscribe:\r\n    // these update state without refetching all data\r\n    const handleUnfollow = async (ngoId) => {\r\n        try {\r\n            const res = await fetch(\"/api/profile/unfollow\", {\r\n                method: \"DELETE\",\r\n                credentials: \"include\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                body: JSON.stringify({ ngoId }),\r\n            });\r\n            if (!res.ok) throw new Error((await res.json()).message || \"Failed to unfollow\");\r\n            setPersonalInfo(prev => ({\r\n                ...prev,\r\n                followings: (prev.followings || []).filter(f => f.ngo_id !== ngoId),\r\n            }));\r\n            alert(\"You have unfollowed the NGO.\");\r\n        } catch (err) {\r\n            console.error(err);\r\n        }\r\n    };\r\n\r\n    // these update state without refetching all dat\r\n    const handleUnsubscribe = async (ngoId) => {\r\n        try {\r\n            await fetch(\"/api/profile/unsubscribe\", {\r\n                method: \"DELETE\",\r\n                credentials: \"include\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                body: JSON.stringify({ ngoId }),\r\n            });\r\n            setPersonalInfo(prev => ({\r\n                ...prev,\r\n                subscriptions: (prev.subscriptions || []).map(sub =>\r\n                    sub.ngo_id === ngoId ? { ...sub, status: \"canceled\" } : sub\r\n                ),\r\n            }));\r\n            alert(\"You have unsubscribed from the NGO.\");\r\n        } catch (err) {\r\n            console.error(err);\r\n        }\r\n    };\r\n\r\n    // Render user/NGO basic info\r\n    const renderPersonalInfo = () => {\r\n        if (isUser) {\r\n            return (\r\n                <div className={styles.info}>\r\n                    {/* Display username & email for regular users */}\r\n                    <h2>{user.username}</h2>\r\n                    <p>Email: {user.email}</p>\r\n                </div>\r\n            );\r\n        }\r\n        // NGO: may return 'user' as array, so handle both\r\n        const org = Array.isArray(PersonalInfo.user) ? PersonalInfo.user[0] : PersonalInfo.user;\r\n        return (\r\n            <div className={styles.info}>\r\n                <h2>{org.name || \"Unnamed NGO\"}</h2>\r\n                <p>Contact: {org.contact_email || \"No contact\"}</p>\r\n                <p>\r\n                    Link:{' '}\r\n                    {org.website_url ? (\r\n                        <a href={org.website_url} target=\"_blank\" rel=\"noreferrer\">\r\n                            Visit site\r\n                        </a>\r\n                    ) : (\r\n                        \"No link\"\r\n                    )}\r\n                </p>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    return (\r\n        <div className={styles.page}>\r\n            <Header />\r\n            <div className={styles.profileWrapper}>\r\n                {/* Left sidebar: picture & basic info */}\r\n                <aside className={styles.leftSideBar}>\r\n                    <div className={styles.photoSection}>\r\n                        <img\r\n                            className={styles.profilePic}\r\n                            src={PersonalInfo.image || \"ngo_icon.png\"}\r\n                            alt=\"Profile\"\r\n                        />\r\n                        <input\r\n                            type=\"file\"\r\n                            ref={fileInputRef}\r\n                            onChange={handleFileChange}\r\n                            accept=\"image/*\"\r\n                            style={{ display: 'none' }}\r\n                        />\r\n                        <button\r\n                            className={styles.uploadButton}\r\n                            onClick={handlePhotoClick}\r\n                        >\r\n                            Add picture\r\n                        </button>\r\n                    </div>\r\n                    {/* Render either user or NGO details */}\r\n                    <div className={styles.informationContainer}>\r\n                        {renderPersonalInfo()}\r\n                    </div>\r\n                </aside>\r\n\r\n                {/* Right sidebar: accordions for followings, subscriptions, etc. */}\r\n                <section className={styles.rightSideBar}>\r\n                    {displayedSections.map((section, index) => {\r\n                        // Determine which array to use for each section index\r\n                        let data = [];\r\n                        if (index === 0) data = PersonalInfo.followings || [];\r\n                        if (index === 1) data = isUser ? PersonalInfo.subscriptions || [] : PersonalInfo.followers || [];\r\n                        if (index === 2) data = PersonalInfo.donations || [];\r\n                        if (index === 3) data = PersonalInfo.post_volunt || [];\r\n\r\n                        const isOpen = openSections.includes(index);\r\n\r\n                        return (\r\n                            <div className={styles.accordionSection} key={index}>\r\n                                <div\r\n                                    className={styles.accordionTitle}\r\n                                    onClick={() => toggleSection(index)}\r\n                                >\r\n                                    {section.title}\r\n                                </div>\r\n\r\n                                <div className={`${styles.accordionContent} ${isOpen ? styles.open : ''}`}>\r\n                                    <ul>\r\n                                        {/* Special link for NGOs to create volunteering posts */}\r\n                                        {index === 3 && (\r\n                                            <li className={styles.linkWrapper}>\r\n                                                <a\r\n                                                    href=\"/post-volunteer\"\r\n                                                    className={styles.linkRedirect}\r\n                                                >\r\n                                                    Create new volunteering post\r\n                                                </a>\r\n                                            </li>\r\n                                        )}\r\n\r\n                                        {data.length > 0 ? (\r\n                                            data.map((item, i) => (\r\n                                                <li key={i} className={styles.followerItem}>\r\n                                                    <div className={styles.followerInfo}>\r\n                                                        <strong>\r\n                                                            {/* display whichever name/title is available */}\r\n                                                            {item.ngo_name || item.username || item.name || item.title}\r\n                                                        </strong>\r\n                                                        <div\r\n                                                            style={{\r\n                                                                fontSize: '0.85rem',\r\n                                                                fontWeight: 'bold',\r\n                                                                color: item.status === 'active' ? 'green' : 'red',\r\n                                                            }}\r\n                                                        >\r\n                                                            {item.status}\r\n                                                        </div>\r\n                                                    </div>\r\n\r\n                                                    <div className={styles.followerActions}>\r\n                                                        {item.amount != null && <span>{`${item.amount} €`}</span>}\r\n                                                        {index === 0 && (\r\n                                                            <button\r\n                                                                className={styles.unfollowButton}\r\n                                                                onClick={() => handleUnfollow(item.ngo_id)}\r\n                                                            >\r\n                                                                Unfollow\r\n                                                            </button>\r\n                                                        )}\r\n                                                        {index === 1 && isUser && item.status !== 'canceled' && (\r\n                                                            <button\r\n                                                                className={styles.unfollowButton}\r\n                                                                onClick={() => handleUnsubscribe(item.ngo_id)}\r\n                                                            >\r\n                                                                Unsubscribe\r\n                                                            </button>\r\n                                                        )}\r\n                                                    </div>\r\n                                                </li>\r\n                                            ))\r\n                                        ) : section.item ? (\r\n                                            <li className={styles.linkWrapper}>\r\n                                                <div className={styles.linkContent}>\r\n                                                    <p>{section.item.text}</p>\r\n                                                    <a\r\n                                                        href={section.item.href}\r\n                                                        className={styles.linkRedirect}\r\n                                                    >\r\n                                                        Edit my page\r\n                                                    </a>\r\n                                                </div>\r\n                                            </li>\r\n                                        ) : (\r\n                                            <li>Nothing yet</li>\r\n                                        )}\r\n                                    </ul>\r\n                                </div>\r\n                            </div>\r\n                        );\r\n                    })}\r\n                </section>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Profile;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}