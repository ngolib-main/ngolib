{"ast":null,"code":"import _objectSpread from\"/home/javi/Server/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from\"react\";import{createPortal}from\"react-dom\";import{NGOCard,OpportunityCard}from\"./SearchCards\";import Header from\"../../components/reusable/Header\";import searchStyle from\"../../style/page/search.module.css\";import tileboxStyle from\"../../style/components/tilebox.module.css\";import{jsxs as _jsxs,jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";const prettyDate=iso=>new Date(iso).toLocaleDateString(undefined,{year:'numeric',month:'short',day:'numeric'});function OpportunityDetailModal(_ref){let{open,onClose,opportunity}=_ref;const[formData,setFormData]=useState({userName:'',userEmail:'',message:''});const[isSubmitting,setIsSubmitting]=useState(false);useEffect(()=>{if(open){setFormData({userName:'',userEmail:'',message:''});setIsSubmitting(false);}},[open,opportunity]);if(!open||!opportunity)return null;const handleChange=e=>{const{name,value}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));};const handleSubmitInquiry=async e=>{e.preventDefault();setIsSubmitting(true);// Placeholder for sending the form data to the backend and sending an email\nconsole.log(\"--- Contact NGO Form Submission ---\");console.log(\"Opportunity Title:\",opportunity.title);console.log(\"Opportunity ID:\",opportunity.opportunity_id);console.log(\"To NGO Contact Email (from opportunity object):\",opportunity.contact_email);console.log(\"User Name:\",formData.userName);console.log(\"User Email (for NGO to reply to):\",formData.userEmail);console.log(\"Message:\",formData.message);onClose();};return/*#__PURE__*/createPortal(/*#__PURE__*/_jsx(\"div\",{className:tileboxStyle[\"modal-backdrop\"],onClick:onClose,children:/*#__PURE__*/_jsxs(\"div\",{className:tileboxStyle[\"modal-content\"],onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Contact NGO about: \",opportunity.title]}),opportunity.start&&/*#__PURE__*/_jsxs(\"p\",{className:tileboxStyle.modalDates,children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Starts:\"}),\" \",prettyDate(opportunity.start),opportunity.end&&/*#__PURE__*/_jsxs(_Fragment,{children:[\" \\xA0|\\xA0 \",/*#__PURE__*/_jsx(\"strong\",{children:\"Ends:\"}),\" \",prettyDate(opportunity.end)]}),\" \"]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmitInquiry,className:searchStyle.modalForm,children:[/*#__PURE__*/_jsxs(\"div\",{className:tileboxStyle['form-group'],children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"userName\",children:\"Your Name:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"userName\",name:\"userName\",value:formData.userName,onChange:handleChange,required:true,disabled:isSubmitting})]}),/*#__PURE__*/_jsxs(\"div\",{className:tileboxStyle['form-group'],children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"userEmail\",children:\"Your Email:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"userEmail\",name:\"userEmail\",value:formData.userEmail,onChange:handleChange,required:true,disabled:isSubmitting})]}),/*#__PURE__*/_jsxs(\"div\",{className:tileboxStyle['form-group'],children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"message\",children:\"Message:\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"message\",name:\"message\",value:formData.message,onChange:handleChange,required:true,rows:\"4\",disabled:isSubmitting})]}),/*#__PURE__*/_jsxs(\"div\",{className:tileboxStyle['modal-button-row'],children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"\".concat(tileboxStyle['modal-button'],\" \").concat(tileboxStyle.secondary),onClick:onClose,disabled:isSubmitting,children:\"Close\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"\".concat(tileboxStyle['modal-button'],\" \").concat(tileboxStyle.primary),disabled:isSubmitting,children:isSubmitting?'Sending...':'Send Inquiry'})]})]})]})}),document.body);}function TileBox(_ref2){let{mode,items,currentPage,setCurrentPage,onOpenOpportunityModal}=_ref2;const cardsPerPage=4;const total=Math.ceil(items.length/cardsPerPage);const start=(currentPage-1)*cardsPerPage;const end=start+cardsPerPage;const visible=items.slice(start,end);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:tileboxStyle.tilebox,children:visible.length===0?/*#__PURE__*/_jsx(\"div\",{className:tileboxStyle[\"no-ngos\"],children:\"No items match selected filters\"}):visible.map(item=>mode==='ngos'?/*#__PURE__*/_jsx(NGOCard,{ngo:item},item.ngo_id):/*#__PURE__*/_jsx(OpportunityCard,{opp:item,onOpenModal:onOpenOpportunityModal},item.opportunity_id))}),/*#__PURE__*/_jsx(\"div\",{className:tileboxStyle.pagination,children:Array.from({length:total},(_,i)=>i+1).map(page=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentPage(page),className:\"\".concat(tileboxStyle['page-button'],\" \").concat(page===currentPage?tileboxStyle.active:\"\"),children:page}))})]});}function SearchPage(){const[items,setItems]=useState([]);const[tags,setTags]=useState([]);const[selectedTags,setSelectedTags]=useState([]);const[loading,setLoading]=useState(true);//to wait until data loads\nconst[currentPage,setCurrentPage]=useState(1);const[mode,setMode]=useState(\"ngos\");const[isModalOpen,setIsModalOpen]=useState(false);const[currentOpportunityForModal,setCurrentOpportunityForModal]=useState(null);useEffect(()=>{const saved=sessionStorage.getItem(\"searchState\");//read from saved json state if present\nif(saved){const{mode,selectedTags,currentPage}=JSON.parse(saved);if(selectedTags)setSelectedTags(selectedTags);if(currentPage)setCurrentPage(currentPage);if(mode)setMode(mode);}},[]);useEffect(()=>{sessionStorage.setItem(\"searchState\",JSON.stringify({// on change of any state, save it to session storage\nselectedTags,currentPage,mode}));},[selectedTags,currentPage,mode]);useEffect(()=>{// run this when the component is mounted, then when mode changes\nfetch(\"/api/\".concat(mode)).then(res=>res.json())// wait for response, parse as json\n.then(_ref3=>{let{ngos,opportunities,tags}=_ref3;// returns either ngos and tags or opportunities and tags, if key not present just undefined\nsetItems(ngos||opportunities);// merged items with tags[], grab either\nsetTags(tags);// flat array of all tag names\n}).catch(err=>console.error(err)).finally(()=>setLoading(false));},[mode]);// dependency array, run when mode changes\nconst handleOpenOpportunityModal=opportunityData=>{setCurrentOpportunityForModal(opportunityData);setIsModalOpen(true);};const handleCloseModal=()=>{setIsModalOpen(false);setCurrentOpportunityForModal(null);};if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading\\u2026\"});const verified=items.filter(it=>it.verified===true||it.verified===undefined);// if undefined, means no verified fiels present, so not ngo but opportunity\nconst filtered=selectedTags.length?verified.filter(it=>selectedTags.every(tag=>it.tags.includes(tag))):verified;const handleTagClick=tag=>{setSelectedTags(prev=>prev.includes(tag)?prev:[...prev,tag]);setCurrentPage(1);//reset the page after applying filters\n};const removeTag=tag=>{setSelectedTags(prev=>prev.filter(t=>t!==tag));};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:searchStyle.layout,children:[/*#__PURE__*/_jsx(\"main\",{children:/*#__PURE__*/_jsx(TileBox,{mode:mode,items:filtered,currentPage:currentPage,setCurrentPage:setCurrentPage,onOpenOpportunityModal:handleOpenOpportunityModal})}),/*#__PURE__*/_jsx(TagSidebar,{mode:mode,onModeChange:value=>{setMode(value);setSelectedTags([]);setCurrentPage(1);},tags:tags,selectedTags:selectedTags,onTagClick:handleTagClick,onRemove:removeTag})]}),/*#__PURE__*/_jsx(OpportunityDetailModal,{open:isModalOpen,onClose:handleCloseModal,opportunity:currentOpportunityForModal})]});// Fragment usage needed when more than one React element is returned\n}function TagSidebar(_ref4){let{mode,onModeChange,tags,selectedTags,onTagClick,onRemove}=_ref4;const availableTags=tags.filter(t=>!selectedTags.includes(t)).sort((a,b)=>a.length-b.length);// sort after filtering, provide a comparison function, that way efficient stacking\nreturn(/*#__PURE__*/// dynamic key for search style to override colour scheme\n_jsxs(\"aside\",{className:\"\".concat(searchStyle.filter,\" \").concat(searchStyle[mode]),children:[/*#__PURE__*/_jsxs(\"select\",{value:mode,onChange:e=>onModeChange(e.target.value),className:searchStyle['select']//TODO implement css\n,children:[/*#__PURE__*/_jsx(\"option\",{value:\"ngos\",children:\"Filter NGOs\"}),/*#__PURE__*/_jsx(\"option\",{value:\"opportunities\",children:\"Filter volunteering\"})]}),selectedTags.length>0&&/*#__PURE__*/_jsx(\"ul\",{className:searchStyle['selected-tags'],children:selectedTags.map(tag=>/*#__PURE__*/_jsxs(\"li\",{children:[tag,/*#__PURE__*/_jsx(\"button\",{onClick:()=>onRemove(tag),children:\"X\"})]},tag))}),/*#__PURE__*/_jsx(\"div\",{className:searchStyle['tag-options'],children:availableTags.map(tag=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>onTagClick(tag),children:tag},tag))})]}));}export default SearchPage;","map":{"version":3,"names":["React","useState","useEffect","createPortal","NGOCard","OpportunityCard","Header","searchStyle","tileboxStyle","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","prettyDate","iso","Date","toLocaleDateString","undefined","year","month","day","OpportunityDetailModal","_ref","open","onClose","opportunity","formData","setFormData","userName","userEmail","message","isSubmitting","setIsSubmitting","handleChange","e","name","value","target","prev","_objectSpread","handleSubmitInquiry","preventDefault","console","log","title","opportunity_id","contact_email","className","onClick","children","stopPropagation","start","modalDates","end","onSubmit","modalForm","htmlFor","type","id","onChange","required","disabled","rows","concat","secondary","primary","document","body","TileBox","_ref2","mode","items","currentPage","setCurrentPage","onOpenOpportunityModal","cardsPerPage","total","Math","ceil","length","visible","slice","tilebox","map","item","ngo","ngo_id","opp","onOpenModal","pagination","Array","from","_","i","page","active","SearchPage","setItems","tags","setTags","selectedTags","setSelectedTags","loading","setLoading","setMode","isModalOpen","setIsModalOpen","currentOpportunityForModal","setCurrentOpportunityForModal","saved","sessionStorage","getItem","JSON","parse","setItem","stringify","fetch","then","res","json","_ref3","ngos","opportunities","catch","err","error","finally","handleOpenOpportunityModal","opportunityData","handleCloseModal","verified","filter","it","filtered","every","tag","includes","handleTagClick","removeTag","t","layout","TagSidebar","onModeChange","onTagClick","onRemove","_ref4","availableTags","sort","a","b"],"sources":["/home/javi/Server/src/components/search/Search.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport {NGOCard, OpportunityCard} from \"./SearchCards\";\r\nimport Header from \"../../components/reusable/Header\";\r\n\r\nimport searchStyle from \"../../style/page/search.module.css\";\r\nimport tileboxStyle from \"../../style/components/tilebox.module.css\";\r\n\r\nconst prettyDate = (iso) =>\r\n    new Date(iso).toLocaleDateString(undefined, {\r\n        year:  'numeric',\r\n        month: 'short',\r\n        day:   'numeric',\r\n    });\r\n\r\nfunction OpportunityDetailModal({ open, onClose, opportunity }) {\r\n    const [formData, setFormData] = useState({\r\n        userName: '',\r\n        userEmail: '',\r\n        message: '',\r\n    });\r\n    const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (open) {\r\n            setFormData({ userName: '', userEmail: '', message: '' });\r\n            setIsSubmitting(false);\r\n        }\r\n    }, [open, opportunity]);\r\n\r\n    if (!open || !opportunity) return null;\r\n\r\n    const handleChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setFormData(prev => ({ ...prev, [name]: value }));\r\n    };\r\n\r\n    const handleSubmitInquiry = async (e) => {\r\n        e.preventDefault();\r\n        setIsSubmitting(true);\r\n\r\n        // Placeholder for sending the form data to the backend and sending an email\r\n        console.log(\"--- Contact NGO Form Submission ---\");\r\n        console.log(\"Opportunity Title:\", opportunity.title);\r\n        console.log(\"Opportunity ID:\", opportunity.opportunity_id);\r\n        console.log(\"To NGO Contact Email (from opportunity object):\", opportunity.contact_email);\r\n        console.log(\"User Name:\", formData.userName);\r\n        console.log(\"User Email (for NGO to reply to):\", formData.userEmail);\r\n        console.log(\"Message:\", formData.message);\r\n\r\n        onClose();\r\n    };\r\n\r\n    return createPortal(\r\n        <div className={tileboxStyle[\"modal-backdrop\"]} onClick={onClose}>\r\n            <div className={tileboxStyle[\"modal-content\"]} onClick={(e) => e.stopPropagation()}>\r\n                <h2>Contact NGO about: {opportunity.title}</h2>\r\n                {opportunity.start && (\r\n                    <p className={tileboxStyle.modalDates}>\r\n                        <strong>Starts:</strong> {prettyDate(opportunity.start)}\r\n                        {opportunity.end && (<> &nbsp;|&nbsp; <strong>Ends:</strong> {prettyDate(opportunity.end)}</>)} {/* nbsp is a non-breaking space, prevents line break between dates */}\r\n                    </p>\r\n                )}\r\n                <form onSubmit={handleSubmitInquiry} className={searchStyle.modalForm}>\r\n                    <div className={tileboxStyle['form-group']}>\r\n                        <label htmlFor=\"userName\">Your Name:</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            id=\"userName\"\r\n                            name=\"userName\"\r\n                            value={formData.userName}\r\n                            onChange={handleChange}\r\n                            required\r\n                            disabled={isSubmitting}\r\n                        />\r\n                    </div>\r\n                    <div className={tileboxStyle['form-group']}>\r\n                        <label htmlFor=\"userEmail\">Your Email:</label>\r\n                        <input\r\n                            type=\"email\"\r\n                            id=\"userEmail\"\r\n                            name=\"userEmail\"\r\n                            value={formData.userEmail}\r\n                            onChange={handleChange}\r\n                            required\r\n                            disabled={isSubmitting}\r\n                        />\r\n                    </div>\r\n                    <div className={tileboxStyle['form-group']}>\r\n                        <label htmlFor=\"message\">Message:</label>\r\n                        <textarea\r\n                            id=\"message\"\r\n                            name=\"message\"\r\n                            value={formData.message}\r\n                            onChange={handleChange}\r\n                            required\r\n                            rows=\"4\"\r\n                            disabled={isSubmitting}\r\n                        />\r\n                    </div>\r\n                    <div className={tileboxStyle['modal-button-row']}>\r\n                        <button\r\n                            type=\"button\"\r\n                            className={`${tileboxStyle['modal-button']} ${tileboxStyle.secondary}`}\r\n                            onClick={onClose}\r\n                            disabled={isSubmitting}\r\n                        >\r\n                            Close\r\n                        </button>\r\n                        <button\r\n                            type=\"submit\"\r\n                            className={`${tileboxStyle['modal-button']} ${tileboxStyle.primary}`}\r\n                            disabled={isSubmitting}\r\n                        >\r\n                            {isSubmitting ? 'Sending...' : 'Send Inquiry'}\r\n                        </button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>,\r\n        document.body\r\n    );\r\n}\r\n\r\nfunction TileBox({mode, items, currentPage, setCurrentPage, onOpenOpportunityModal}) {\r\n    const cardsPerPage = 4;\r\n    const total = Math.ceil(items.length / cardsPerPage);\r\n    const start = (currentPage - 1) * cardsPerPage;\r\n    const end = start + cardsPerPage;\r\n    const visible = items.slice(start, end);\r\n\r\n    return (\r\n        <>\r\n            <div className={tileboxStyle.tilebox}>\r\n                {visible.length === 0 ? (\r\n                    <div className={tileboxStyle[\"no-ngos\"]}>No items match selected filters</div>\r\n                )\r\n                    : (visible.map(item =>\r\n                            mode === 'ngos' ? (\r\n                    <NGOCard\r\n                        key={item.ngo_id}\r\n                        ngo={item}\r\n                    />\r\n                ) : (\r\n                    <OpportunityCard\r\n                        key={item.opportunity_id}\r\n                        opp={item}\r\n                        onOpenModal={onOpenOpportunityModal}\r\n                    />\r\n                )\r\n                ))}\r\n            </div>\r\n            <div className={tileboxStyle.pagination}>\r\n                {Array.from({ length: total }, (_, i) => i + 1).map(page => (\r\n                    <button\r\n                        onClick={() => setCurrentPage(page)}\r\n                        className={`${tileboxStyle['page-button']} ${page === currentPage ? tileboxStyle.active : \"\"}`}\r\n                    >\r\n                        {page}\r\n                    </button>\r\n                ))}\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nfunction SearchPage() {\r\n    const [items, setItems] = useState([]);\r\n    const [tags, setTags] = useState([]);\r\n    const [selectedTags, setSelectedTags] = useState([]);\r\n    const [loading, setLoading] = useState(true); //to wait until data loads\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const [mode, setMode] = useState(\"ngos\");\r\n\r\n    const [isModalOpen, setIsModalOpen] = useState(false);\r\n    const [currentOpportunityForModal, setCurrentOpportunityForModal] = useState(null);\r\n\r\n    useEffect(() => {\r\n        const saved = sessionStorage.getItem(\"searchState\");    //read from saved json state if present\r\n        if (saved) {\r\n            const { mode, selectedTags, currentPage } = JSON.parse(saved);\r\n            if(selectedTags) setSelectedTags(selectedTags);\r\n            if(currentPage) setCurrentPage(currentPage);\r\n            if(mode) setMode(mode);\r\n        }\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        sessionStorage.setItem(\"searchState\", JSON.stringify({  // on change of any state, save it to session storage\r\n            selectedTags,\r\n            currentPage,\r\n            mode,\r\n        }));\r\n    }, [selectedTags, currentPage, mode]);\r\n\r\n    useEffect(() => {                                           // run this when the component is mounted, then when mode changes\r\n        fetch(`/api/${mode}`)\r\n            .then(res => res.json())                        // wait for response, parse as json\r\n            .then(({ ngos, opportunities, tags}) => {                   // returns either ngos and tags or opportunities and tags, if key not present just undefined\r\n                setItems(ngos || opportunities);                   // merged items with tags[], grab either\r\n                setTags(tags);                                      // flat array of all tag names\r\n            })\r\n            .catch(err => console.error(err))\r\n            .finally(() => setLoading(false));\r\n    }, [mode]);                                                // dependency array, run when mode changes\r\n\r\n    const handleOpenOpportunityModal = (opportunityData) => {\r\n        setCurrentOpportunityForModal(opportunityData);\r\n        setIsModalOpen(true);\r\n    };\r\n\r\n    const handleCloseModal = () => {\r\n        setIsModalOpen(false);\r\n        setCurrentOpportunityForModal(null);\r\n    };\r\n\r\n    if (loading) return <div>Loadingâ€¦</div>;\r\n\r\n    const verified = items.filter(it =>\r\n        it.verified === true || it.verified === undefined\r\n    );      // if undefined, means no verified fiels present, so not ngo but opportunity\r\n\r\n    const filtered = selectedTags.length\r\n        ? verified.filter(it =>\r\n            selectedTags.every(tag => it.tags.includes(tag))\r\n        )\r\n        : verified;\r\n\r\n    const handleTagClick = tag => {\r\n        setSelectedTags(prev =>\r\n            prev.includes(tag) ? prev : [...prev, tag]\r\n        );\r\n        setCurrentPage(1);  //reset the page after applying filters\r\n    };\r\n\r\n    const removeTag = tag => {\r\n        setSelectedTags(prev => prev.filter(t => t !== tag));\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Header/>\r\n            <div className={searchStyle.layout}>\r\n                <main>\r\n                    <TileBox\r\n                        mode={mode}\r\n                        items={filtered}\r\n                        currentPage={currentPage}\r\n                        setCurrentPage={setCurrentPage}\r\n                        onOpenOpportunityModal={handleOpenOpportunityModal}\r\n                    />\r\n                </main>\r\n                <TagSidebar\r\n                    mode={mode}\r\n                    onModeChange={(value) => {\r\n                        setMode(value);\r\n                        setSelectedTags([]);\r\n                        setCurrentPage(1);\r\n                    }}\r\n                    tags={tags}\r\n                    selectedTags={selectedTags}\r\n                    onTagClick={handleTagClick}\r\n                    onRemove={removeTag}\r\n                />\r\n            </div>\r\n            <OpportunityDetailModal\r\n                open={isModalOpen}\r\n                onClose={handleCloseModal}\r\n                opportunity={currentOpportunityForModal}\r\n            />\r\n        </>\r\n    ) // Fragment usage needed when more than one React element is returned\r\n}\r\n\r\nfunction TagSidebar({mode, onModeChange, tags, selectedTags, onTagClick, onRemove }) {\r\n    const availableTags = tags\r\n        .filter(t => !selectedTags.includes(t))\r\n        .sort((a, b) => a.length - b.length);   // sort after filtering, provide a comparison function, that way efficient stacking\r\n\r\n    return (\r\n        // dynamic key for search style to override colour scheme\r\n            <aside className={`${searchStyle.filter} ${searchStyle[mode]}`}>\r\n                <select\r\n                    value={mode}\r\n                    onChange={e => onModeChange(e.target.value)}\r\n                    className={searchStyle['select']} //TODO implement css\r\n                >\r\n                    <option value=\"ngos\">Filter NGOs</option>\r\n                    <option value=\"opportunities\">Filter volunteering</option>\r\n                </select>\r\n                {selectedTags.length > 0 && (\r\n                    <ul className={searchStyle['selected-tags']}>\r\n                        {selectedTags.map(tag => (\r\n                            <li key={tag}>\r\n                                {tag}\r\n                                <button onClick={() => onRemove(tag)}>X</button>\r\n                            </li>\r\n                        ))}\r\n                    </ul>\r\n                )}\r\n                <div className={searchStyle['tag-options']}>\r\n                    {availableTags.map(tag => (\r\n                        <button key={tag} onClick={() => onTagClick(tag)}>\r\n                            {tag}\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n            </aside>\r\n    )\r\n}\r\n\r\nexport default SearchPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}