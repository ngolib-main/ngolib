{"ast":null,"code":"/*\r\n *  There are 2 base tabs: Donate and Home\r\n *  Plus another two conditional ones based on the cookie from /api/auth/me\r\n *  If a user is logged in, then two extra tabs are displayed:\r\n *  Profile and Log out\r\n *  Depending on the user type (\"user\", \"NGO\" or \"admin\") the Profile link redirects to\r\n *  different kind of progile pages.\r\n */import*as React from'react';import{useState,useEffect}from\"react\";// TODO: Third: Depends on outcome of Second. To delete or not to delete (the below line)?\nimport{useNavigate}from\"react-router-dom\";import headerStyle from\"../../style/reusable/header.module.css\";import Sidebar from\"./Sidebar\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Header(){// Retrieve any cookie data after/if the user is logged in.\nconst[user,setUser]=useState(null);// TODO: Second: Depends on outcome of First. To delete or not to delete (the below line)?\nconst navigate=useNavigate();// Retrieves the cookie to check whether there is any user logged in.\nuseEffect(()=>{fetch(\"/api/auth/me\",{credentials:\"include\"}).then(res=>res.ok?res.json():Promise.reject(\"Not logged in\")).then(data=>setUser(data)).catch(err=>{console.log(\"User not logged in:\",err);});},[]);// Function lo Logout.\nconst handleLogout=async()=>{try{await fetch(\"/api/auth/logout\",{method:\"POST\",credentials:\"include\"});setUser(null);// TODO: First: What to do after logging out? Redirect to Login or stay in the current page?\nnavigate(\"/home\");// Redirect to login or homepage\n}catch(err){console.error(\"Logout failed:\",err);}};// Decide profile path based on user type\nlet profileTab;if(!user){profileTab={label:'Log In',path:'/login'};}else{let path='/home';if(user.type==='NGO')path='/profile';else if(user.type==='user')path='/user';else if(user.type==='admin')path='/admin';profileTab={label:'Profile',path};}// Base tabs\nconst tabs=[{label:'Donate',path:'/search'},{label:'Home',path:'/home'},profileTab];// If user is logged in, add logout as a clickable tab\nif(user){tabs.push({label:'Log out',action:handleLogout// Sidebar must support actions (see note below)\n});}return/*#__PURE__*/_jsx(\"div\",{className:headerStyle.header,children:/*#__PURE__*/_jsxs(\"div\",{className:headerStyle[\"header-content\"],children:[/*#__PURE__*/_jsx(\"img\",{src:\"/logo.png\",alt:\"Charity logo\",className:headerStyle[\"logo-image\"]}),/*#__PURE__*/_jsx(\"h1\",{className:headerStyle[\"header-title\"],children:\"NGOLib\"}),/*#__PURE__*/_jsx(Sidebar,{tabs:tabs,children:user&&/*#__PURE__*/_jsxs(\"div\",{className:headerStyle[\"header-user\"],children:[\"Hello, \",user.name||user.email]})})]})});}export default Header;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","headerStyle","Sidebar","jsx","_jsx","jsxs","_jsxs","Header","user","setUser","navigate","fetch","credentials","then","res","ok","json","Promise","reject","data","catch","err","console","log","handleLogout","method","error","profileTab","label","path","type","tabs","push","action","className","header","children","src","alt","name","email"],"sources":["/home/javi/Server/src/components/reusable/Header.js"],"sourcesContent":["/*\r\n *  There are 2 base tabs: Donate and Home\r\n *  Plus another two conditional ones based on the cookie from /api/auth/me\r\n *  If a user is logged in, then two extra tabs are displayed:\r\n *  Profile and Log out\r\n *  Depending on the user type (\"user\", \"NGO\" or \"admin\") the Profile link redirects to\r\n *  different kind of progile pages.\r\n */\r\n\r\nimport * as React from 'react';\r\nimport {useState, useEffect} from \"react\";\r\n// TODO: Third: Depends on outcome of Second. To delete or not to delete (the below line)?\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport headerStyle from \"../../style/reusable/header.module.css\"\r\nimport Sidebar from \"./Sidebar\";\r\n\r\nfunction Header() {\r\n\r\n    // Retrieve any cookie data after/if the user is logged in.\r\n    const [user, setUser] = useState(null);\r\n    // TODO: Second: Depends on outcome of First. To delete or not to delete (the below line)?\r\n    const navigate = useNavigate();\r\n\r\n    // Retrieves the cookie to check whether there is any user logged in.\r\n    useEffect(() => {\r\n        fetch(\"/api/auth/me\", {\r\n            credentials: \"include\"\r\n        })\r\n            .then(res => res.ok ? res.json() : Promise.reject(\"Not logged in\"))\r\n            .then(data => setUser(data))\r\n            .catch(err => {\r\n                console.log(\"User not logged in:\", err);\r\n            });\r\n    }, []);\r\n\r\n    // Function lo Logout.\r\n    const handleLogout = async () => {\r\n        try {\r\n            await fetch(\"/api/auth/logout\", {\r\n                method: \"POST\",\r\n                credentials: \"include\"\r\n            });\r\n            setUser(null);\r\n            // TODO: First: What to do after logging out? Redirect to Login or stay in the current page?\r\n            navigate(\"/home\"); // Redirect to login or homepage\r\n        } catch (err) {\r\n            console.error(\"Logout failed:\", err);\r\n        }\r\n    };\r\n\r\n    // Decide profile path based on user type\r\n    let profileTab;\r\n    if (!user) {\r\n        profileTab = { label: 'Log In', path: '/login' };\r\n    } else {\r\n        let path = '/home';\r\n        if (user.type === 'NGO') path = '/profile';\r\n        else if (user.type === 'user') path = '/user';\r\n        else if (user.type === 'admin') path = '/admin';\r\n        profileTab = { label: 'Profile', path };\r\n    }\r\n\r\n    // Base tabs\r\n    const tabs = [\r\n        { label: 'Donate', path: '/search' },\r\n        { label: 'Home', path: '/home' },\r\n        profileTab\r\n    ];\r\n\r\n    // If user is logged in, add logout as a clickable tab\r\n    if (user) {\r\n        tabs.push({\r\n            label: 'Log out',\r\n            action: handleLogout // Sidebar must support actions (see note below)\r\n        });\r\n    }\r\n\r\n    return (\r\n        <div className={headerStyle.header}>\r\n            <div className={headerStyle[\"header-content\"]}>\r\n                <img\r\n                    src=\"/logo.png\"\r\n                    alt=\"Charity logo\"\r\n                    className={headerStyle[\"logo-image\"]}\r\n                />\r\n                <h1 className={headerStyle[\"header-title\"]}>NGOLib</h1>\r\n                <Sidebar tabs={tabs}>\r\n                    {user && (\r\n                        <div className={headerStyle[\"header-user\"]}>\r\n                            Hello, {user.name || user.email}\r\n                        </div>\r\n                    )}\r\n                </Sidebar>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Header;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}