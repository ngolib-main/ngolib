{"ast":null,"code":"var _jsxFileName = \"/home/javi/Server/src/components/search/Search.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport { NGOCard, OpportunityCard } from \"./SearchCards\";\nimport Header from \"../../components/reusable/Header\";\nimport searchStyle from \"../../style/page/search.module.css\";\nimport tileboxStyle from \"../../style/components/tilebox.module.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst prettyDate = iso => new Date(iso).toLocaleDateString(undefined, {\n  year: 'numeric',\n  month: 'short',\n  day: 'numeric'\n});\nfunction OpportunityDetailModal({\n  open,\n  onClose,\n  opportunity\n}) {\n  _s();\n  const [formData, setFormData] = useState({\n    userName: '',\n    userEmail: '',\n    message: ''\n  });\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  useEffect(() => {\n    if (open) {\n      setFormData({\n        userName: '',\n        userEmail: '',\n        message: ''\n      });\n      setIsSubmitting(false);\n    }\n  }, [open, opportunity]);\n  if (!open || !opportunity) return null;\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handleSubmitInquiry = async e => {\n    e.preventDefault();\n    setIsSubmitting(true);\n\n    // Placeholder for sending the form data to the backend and sending an email\n    console.log(\"--- Contact NGO Form Submission ---\");\n    console.log(\"Opportunity Title:\", opportunity.title);\n    console.log(\"Opportunity ID:\", opportunity.opportunity_id);\n    console.log(\"To NGO Contact Email (from opportunity object):\", opportunity.contact_email);\n    console.log(\"User Name:\", formData.userName);\n    console.log(\"User Email (for NGO to reply to):\", formData.userEmail);\n    console.log(\"Message:\", formData.message);\n    onClose();\n  };\n  return /*#__PURE__*/createPortal(/*#__PURE__*/_jsxDEV(\"div\", {\n    className: tileboxStyle[\"modal-backdrop\"],\n    onClick: onClose,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: tileboxStyle[\"modal-content\"],\n      onClick: e => e.stopPropagation(),\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"Contact NGO about: \", opportunity.title]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }, this), opportunity.start && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: tileboxStyle.modalDates,\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Starts:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 25\n        }, this), \" \", prettyDate(opportunity.start), opportunity.end && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [\" \\xA0|\\xA0 \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Ends:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 63\n          }, this), \" \", prettyDate(opportunity.end)]\n        }, void 0, true), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmitInquiry,\n        className: searchStyle.modalForm,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: tileboxStyle['form-group'],\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"userName\",\n            children: \"Your Name:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"userName\",\n            name: \"userName\",\n            value: formData.userName,\n            onChange: handleChange,\n            required: true,\n            disabled: isSubmitting\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: tileboxStyle['form-group'],\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"userEmail\",\n            children: \"Your Email:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            id: \"userEmail\",\n            name: \"userEmail\",\n            value: formData.userEmail,\n            onChange: handleChange,\n            required: true,\n            disabled: isSubmitting\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: tileboxStyle['form-group'],\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"message\",\n            children: \"Message:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            id: \"message\",\n            name: \"message\",\n            value: formData.message,\n            onChange: handleChange,\n            required: true,\n            rows: \"4\",\n            disabled: isSubmitting\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: tileboxStyle['modal-button-row'],\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: `${tileboxStyle['modal-button']} ${tileboxStyle.secondary}`,\n            onClick: onClose,\n            disabled: isSubmitting,\n            children: \"Close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: `${tileboxStyle['modal-button']} ${tileboxStyle.primary}`,\n            disabled: isSubmitting,\n            children: isSubmitting ? 'Sending...' : 'Send Inquiry'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 9\n  }, this), document.body);\n}\n_s(OpportunityDetailModal, \"7YVC6t/8qYdQ2xkHQ3FgOMNnXIw=\");\n_c = OpportunityDetailModal;\nfunction TileBox({\n  mode,\n  items,\n  currentPage,\n  setCurrentPage,\n  onOpenOpportunityModal\n}) {\n  const cardsPerPage = 4;\n  const total = Math.ceil(items.length / cardsPerPage);\n  const start = (currentPage - 1) * cardsPerPage;\n  const end = start + cardsPerPage;\n  const visible = items.slice(start, end);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: tileboxStyle.tilebox,\n      children: visible.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: tileboxStyle[\"no-ngos\"],\n        children: \"No items match selected filters\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 21\n      }, this) : visible.map(item => mode === 'ngos' ? /*#__PURE__*/_jsxDEV(NGOCard, {\n        ngo: item\n      }, item.ngo_id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(OpportunityCard, {\n        opp: item,\n        onOpenModal: onOpenOpportunityModal\n      }, item.opportunity_id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: tileboxStyle.pagination,\n      children: Array.from({\n        length: total\n      }, (_, i) => i + 1).map(page => /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setCurrentPage(page),\n        className: `${tileboxStyle['page-button']} ${page === currentPage ? tileboxStyle.active : \"\"}`,\n        children: page\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n_c2 = TileBox;\nfunction SearchPage() {\n  _s2();\n  const [items, setItems] = useState([]);\n  const [tags, setTags] = useState([]);\n  const [selectedTags, setSelectedTags] = useState([]);\n  const [loading, setLoading] = useState(true); //to wait until data loads\n  const [currentPage, setCurrentPage] = useState(1);\n  const [mode, setMode] = useState(\"ngos\");\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [currentOpportunityForModal, setCurrentOpportunityForModal] = useState(null);\n  useEffect(() => {\n    const saved = sessionStorage.getItem(\"searchState\"); //read from saved json state if present\n    if (saved) {\n      const {\n        mode,\n        selectedTags,\n        currentPage\n      } = JSON.parse(saved);\n      if (selectedTags) setSelectedTags(selectedTags);\n      if (currentPage) setCurrentPage(currentPage);\n      if (mode) setMode(mode);\n    }\n  }, []);\n  useEffect(() => {\n    sessionStorage.setItem(\"searchState\", JSON.stringify({\n      // on change of any state, save it to session storage\n      selectedTags,\n      currentPage,\n      mode\n    }));\n  }, [selectedTags, currentPage, mode]);\n  useEffect(() => {\n    // run this when the component is mounted, then when mode changes\n    fetch(`/api/${mode}`).then(res => res.json()) // wait for response, parse as json\n    .then(({\n      ngos,\n      opportunities,\n      tags\n    }) => {\n      // returns either ngos and tags or opportunities and tags, if key not present just undefined\n      setItems(ngos || opportunities); // merged items with tags[], grab either\n      setTags(tags); // flat array of all tag names\n    }).catch(err => console.error(err)).finally(() => setLoading(false));\n  }, [mode]); // dependency array, run when mode changes\n\n  const handleOpenOpportunityModal = opportunityData => {\n    setCurrentOpportunityForModal(opportunityData);\n    setIsModalOpen(true);\n  };\n  const handleCloseModal = () => {\n    setIsModalOpen(false);\n    setCurrentOpportunityForModal(null);\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading\\u2026\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 217,\n    columnNumber: 25\n  }, this);\n  const verified = items.filter(it => it.verified === true || it.verified === undefined); // if undefined, means no verified fiels present, so not ngo but opportunity\n\n  const filtered = selectedTags.length ? verified.filter(it => selectedTags.every(tag => it.tags.includes(tag))) : verified;\n  const handleTagClick = tag => {\n    setSelectedTags(prev => prev.includes(tag) ? prev : [...prev, tag]);\n    setCurrentPage(1); //reset the page after applying filters\n  };\n  const removeTag = tag => {\n    setSelectedTags(prev => prev.filter(t => t !== tag));\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: searchStyle.layout,\n      children: [/*#__PURE__*/_jsxDEV(\"main\", {\n        children: /*#__PURE__*/_jsxDEV(TileBox, {\n          mode: mode,\n          items: filtered,\n          currentPage: currentPage,\n          setCurrentPage: setCurrentPage,\n          onOpenOpportunityModal: handleOpenOpportunityModal\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(TagSidebar, {\n        mode: mode,\n        onModeChange: value => {\n          setMode(value);\n          setSelectedTags([]);\n          setCurrentPage(1);\n        },\n        tags: tags,\n        selectedTags: selectedTags,\n        onTagClick: handleTagClick,\n        onRemove: removeTag\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(OpportunityDetailModal, {\n      open: isModalOpen,\n      onClose: handleCloseModal,\n      opportunity: currentOpportunityForModal\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true); // Fragment usage needed when more than one React element is returned\n}\n_s2(SearchPage, \"eqEhCz08X5+dy4VC9J8y8Q71DRw=\");\n_c3 = SearchPage;\nfunction TagSidebar({\n  mode,\n  onModeChange,\n  tags,\n  selectedTags,\n  onTagClick,\n  onRemove\n}) {\n  const availableTags = tags.filter(t => !selectedTags.includes(t)).sort((a, b) => a.length - b.length); // sort after filtering, provide a comparison function, that way efficient stacking\n\n  return (\n    /*#__PURE__*/\n    // dynamic key for search style to override colour scheme\n    _jsxDEV(\"aside\", {\n      className: `${searchStyle.filter} ${searchStyle[mode]}`,\n      children: [/*#__PURE__*/_jsxDEV(\"select\", {\n        value: mode,\n        onChange: e => onModeChange(e.target.value),\n        className: searchStyle['select'] //TODO implement css\n        ,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"ngos\",\n          children: \"Filter NGOs\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"opportunities\",\n          children: \"Filter volunteering\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 17\n      }, this), selectedTags.length > 0 && /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: searchStyle['selected-tags'],\n        children: selectedTags.map(tag => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [tag, /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => onRemove(tag),\n            children: \"X\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 33\n          }, this)]\n        }, tag, true, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 29\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: searchStyle['tag-options'],\n        children: availableTags.map(tag => /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => onTagClick(tag),\n          children: tag\n        }, tag, false, {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 13\n    }, this)\n  );\n}\n_c4 = TagSidebar;\nexport default SearchPage;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"OpportunityDetailModal\");\n$RefreshReg$(_c2, \"TileBox\");\n$RefreshReg$(_c3, \"SearchPage\");\n$RefreshReg$(_c4, \"TagSidebar\");","map":{"version":3,"names":["React","useState","useEffect","createPortal","NGOCard","OpportunityCard","Header","searchStyle","tileboxStyle","jsxDEV","_jsxDEV","Fragment","_Fragment","prettyDate","iso","Date","toLocaleDateString","undefined","year","month","day","OpportunityDetailModal","open","onClose","opportunity","_s","formData","setFormData","userName","userEmail","message","isSubmitting","setIsSubmitting","handleChange","e","name","value","target","prev","handleSubmitInquiry","preventDefault","console","log","title","opportunity_id","contact_email","className","onClick","children","stopPropagation","fileName","_jsxFileName","lineNumber","columnNumber","start","modalDates","end","onSubmit","modalForm","htmlFor","type","id","onChange","required","disabled","rows","secondary","primary","document","body","_c","TileBox","mode","items","currentPage","setCurrentPage","onOpenOpportunityModal","cardsPerPage","total","Math","ceil","length","visible","slice","tilebox","map","item","ngo","ngo_id","opp","onOpenModal","pagination","Array","from","_","i","page","active","_c2","SearchPage","_s2","setItems","tags","setTags","selectedTags","setSelectedTags","loading","setLoading","setMode","isModalOpen","setIsModalOpen","currentOpportunityForModal","setCurrentOpportunityForModal","saved","sessionStorage","getItem","JSON","parse","setItem","stringify","fetch","then","res","json","ngos","opportunities","catch","err","error","finally","handleOpenOpportunityModal","opportunityData","handleCloseModal","verified","filter","it","filtered","every","tag","includes","handleTagClick","removeTag","t","layout","TagSidebar","onModeChange","onTagClick","onRemove","_c3","availableTags","sort","a","b","_c4","$RefreshReg$"],"sources":["/home/javi/Server/src/components/search/Search.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport {NGOCard, OpportunityCard} from \"./SearchCards\";\r\nimport Header from \"../../components/reusable/Header\";\r\n\r\nimport searchStyle from \"../../style/page/search.module.css\";\r\nimport tileboxStyle from \"../../style/components/tilebox.module.css\";\r\n\r\nconst prettyDate = (iso) =>\r\n    new Date(iso).toLocaleDateString(undefined, {\r\n        year:  'numeric',\r\n        month: 'short',\r\n        day:   'numeric',\r\n    });\r\n\r\nfunction OpportunityDetailModal({ open, onClose, opportunity }) {\r\n    const [formData, setFormData] = useState({\r\n        userName: '',\r\n        userEmail: '',\r\n        message: '',\r\n    });\r\n    const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (open) {\r\n            setFormData({ userName: '', userEmail: '', message: '' });\r\n            setIsSubmitting(false);\r\n        }\r\n    }, [open, opportunity]);\r\n\r\n    if (!open || !opportunity) return null;\r\n\r\n    const handleChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setFormData(prev => ({ ...prev, [name]: value }));\r\n    };\r\n\r\n    const handleSubmitInquiry = async (e) => {\r\n        e.preventDefault();\r\n        setIsSubmitting(true);\r\n\r\n        // Placeholder for sending the form data to the backend and sending an email\r\n        console.log(\"--- Contact NGO Form Submission ---\");\r\n        console.log(\"Opportunity Title:\", opportunity.title);\r\n        console.log(\"Opportunity ID:\", opportunity.opportunity_id);\r\n        console.log(\"To NGO Contact Email (from opportunity object):\", opportunity.contact_email);\r\n        console.log(\"User Name:\", formData.userName);\r\n        console.log(\"User Email (for NGO to reply to):\", formData.userEmail);\r\n        console.log(\"Message:\", formData.message);\r\n\r\n        onClose();\r\n    };\r\n\r\n    return createPortal(\r\n        <div className={tileboxStyle[\"modal-backdrop\"]} onClick={onClose}>\r\n            <div className={tileboxStyle[\"modal-content\"]} onClick={(e) => e.stopPropagation()}>\r\n                <h2>Contact NGO about: {opportunity.title}</h2>\r\n                {opportunity.start && (\r\n                    <p className={tileboxStyle.modalDates}>\r\n                        <strong>Starts:</strong> {prettyDate(opportunity.start)}\r\n                        {opportunity.end && (<> &nbsp;|&nbsp; <strong>Ends:</strong> {prettyDate(opportunity.end)}</>)} {/* nbsp is a non-breaking space, prevents line break between dates */}\r\n                    </p>\r\n                )}\r\n                <form onSubmit={handleSubmitInquiry} className={searchStyle.modalForm}>\r\n                    <div className={tileboxStyle['form-group']}>\r\n                        <label htmlFor=\"userName\">Your Name:</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            id=\"userName\"\r\n                            name=\"userName\"\r\n                            value={formData.userName}\r\n                            onChange={handleChange}\r\n                            required\r\n                            disabled={isSubmitting}\r\n                        />\r\n                    </div>\r\n                    <div className={tileboxStyle['form-group']}>\r\n                        <label htmlFor=\"userEmail\">Your Email:</label>\r\n                        <input\r\n                            type=\"email\"\r\n                            id=\"userEmail\"\r\n                            name=\"userEmail\"\r\n                            value={formData.userEmail}\r\n                            onChange={handleChange}\r\n                            required\r\n                            disabled={isSubmitting}\r\n                        />\r\n                    </div>\r\n                    <div className={tileboxStyle['form-group']}>\r\n                        <label htmlFor=\"message\">Message:</label>\r\n                        <textarea\r\n                            id=\"message\"\r\n                            name=\"message\"\r\n                            value={formData.message}\r\n                            onChange={handleChange}\r\n                            required\r\n                            rows=\"4\"\r\n                            disabled={isSubmitting}\r\n                        />\r\n                    </div>\r\n                    <div className={tileboxStyle['modal-button-row']}>\r\n                        <button\r\n                            type=\"button\"\r\n                            className={`${tileboxStyle['modal-button']} ${tileboxStyle.secondary}`}\r\n                            onClick={onClose}\r\n                            disabled={isSubmitting}\r\n                        >\r\n                            Close\r\n                        </button>\r\n                        <button\r\n                            type=\"submit\"\r\n                            className={`${tileboxStyle['modal-button']} ${tileboxStyle.primary}`}\r\n                            disabled={isSubmitting}\r\n                        >\r\n                            {isSubmitting ? 'Sending...' : 'Send Inquiry'}\r\n                        </button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>,\r\n        document.body\r\n    );\r\n}\r\n\r\nfunction TileBox({mode, items, currentPage, setCurrentPage, onOpenOpportunityModal}) {\r\n    const cardsPerPage = 4;\r\n    const total = Math.ceil(items.length / cardsPerPage);\r\n    const start = (currentPage - 1) * cardsPerPage;\r\n    const end = start + cardsPerPage;\r\n    const visible = items.slice(start, end);\r\n\r\n    return (\r\n        <>\r\n            <div className={tileboxStyle.tilebox}>\r\n                {visible.length === 0 ? (\r\n                    <div className={tileboxStyle[\"no-ngos\"]}>No items match selected filters</div>\r\n                )\r\n                    : (visible.map(item =>\r\n                            mode === 'ngos' ? (\r\n                    <NGOCard\r\n                        key={item.ngo_id}\r\n                        ngo={item}\r\n                    />\r\n                ) : (\r\n                    <OpportunityCard\r\n                        key={item.opportunity_id}\r\n                        opp={item}\r\n                        onOpenModal={onOpenOpportunityModal}\r\n                    />\r\n                )\r\n                ))}\r\n            </div>\r\n            <div className={tileboxStyle.pagination}>\r\n                {Array.from({ length: total }, (_, i) => i + 1).map(page => (\r\n                    <button\r\n                        onClick={() => setCurrentPage(page)}\r\n                        className={`${tileboxStyle['page-button']} ${page === currentPage ? tileboxStyle.active : \"\"}`}\r\n                    >\r\n                        {page}\r\n                    </button>\r\n                ))}\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nfunction SearchPage() {\r\n    const [items, setItems] = useState([]);\r\n    const [tags, setTags] = useState([]);\r\n    const [selectedTags, setSelectedTags] = useState([]);\r\n    const [loading, setLoading] = useState(true); //to wait until data loads\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const [mode, setMode] = useState(\"ngos\");\r\n\r\n    const [isModalOpen, setIsModalOpen] = useState(false);\r\n    const [currentOpportunityForModal, setCurrentOpportunityForModal] = useState(null);\r\n\r\n    useEffect(() => {\r\n        const saved = sessionStorage.getItem(\"searchState\");    //read from saved json state if present\r\n        if (saved) {\r\n            const { mode, selectedTags, currentPage } = JSON.parse(saved);\r\n            if(selectedTags) setSelectedTags(selectedTags);\r\n            if(currentPage) setCurrentPage(currentPage);\r\n            if(mode) setMode(mode);\r\n        }\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        sessionStorage.setItem(\"searchState\", JSON.stringify({  // on change of any state, save it to session storage\r\n            selectedTags,\r\n            currentPage,\r\n            mode,\r\n        }));\r\n    }, [selectedTags, currentPage, mode]);\r\n\r\n    useEffect(() => {                                           // run this when the component is mounted, then when mode changes\r\n        fetch(`/api/${mode}`)\r\n            .then(res => res.json())                        // wait for response, parse as json\r\n            .then(({ ngos, opportunities, tags}) => {                   // returns either ngos and tags or opportunities and tags, if key not present just undefined\r\n                setItems(ngos || opportunities);                   // merged items with tags[], grab either\r\n                setTags(tags);                                      // flat array of all tag names\r\n            })\r\n            .catch(err => console.error(err))\r\n            .finally(() => setLoading(false));\r\n    }, [mode]);                                                // dependency array, run when mode changes\r\n\r\n    const handleOpenOpportunityModal = (opportunityData) => {\r\n        setCurrentOpportunityForModal(opportunityData);\r\n        setIsModalOpen(true);\r\n    };\r\n\r\n    const handleCloseModal = () => {\r\n        setIsModalOpen(false);\r\n        setCurrentOpportunityForModal(null);\r\n    };\r\n\r\n    if (loading) return <div>Loadingâ€¦</div>;\r\n\r\n    const verified = items.filter(it =>\r\n        it.verified === true || it.verified === undefined\r\n    );      // if undefined, means no verified fiels present, so not ngo but opportunity\r\n\r\n    const filtered = selectedTags.length\r\n        ? verified.filter(it =>\r\n            selectedTags.every(tag => it.tags.includes(tag))\r\n        )\r\n        : verified;\r\n\r\n    const handleTagClick = tag => {\r\n        setSelectedTags(prev =>\r\n            prev.includes(tag) ? prev : [...prev, tag]\r\n        );\r\n        setCurrentPage(1);  //reset the page after applying filters\r\n    };\r\n\r\n    const removeTag = tag => {\r\n        setSelectedTags(prev => prev.filter(t => t !== tag));\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Header/>\r\n            <div className={searchStyle.layout}>\r\n                <main>\r\n                    <TileBox\r\n                        mode={mode}\r\n                        items={filtered}\r\n                        currentPage={currentPage}\r\n                        setCurrentPage={setCurrentPage}\r\n                        onOpenOpportunityModal={handleOpenOpportunityModal}\r\n                    />\r\n                </main>\r\n                <TagSidebar\r\n                    mode={mode}\r\n                    onModeChange={(value) => {\r\n                        setMode(value);\r\n                        setSelectedTags([]);\r\n                        setCurrentPage(1);\r\n                    }}\r\n                    tags={tags}\r\n                    selectedTags={selectedTags}\r\n                    onTagClick={handleTagClick}\r\n                    onRemove={removeTag}\r\n                />\r\n            </div>\r\n            <OpportunityDetailModal\r\n                open={isModalOpen}\r\n                onClose={handleCloseModal}\r\n                opportunity={currentOpportunityForModal}\r\n            />\r\n        </>\r\n    ) // Fragment usage needed when more than one React element is returned\r\n}\r\n\r\nfunction TagSidebar({mode, onModeChange, tags, selectedTags, onTagClick, onRemove }) {\r\n    const availableTags = tags\r\n        .filter(t => !selectedTags.includes(t))\r\n        .sort((a, b) => a.length - b.length);   // sort after filtering, provide a comparison function, that way efficient stacking\r\n\r\n    return (\r\n        // dynamic key for search style to override colour scheme\r\n            <aside className={`${searchStyle.filter} ${searchStyle[mode]}`}>\r\n                <select\r\n                    value={mode}\r\n                    onChange={e => onModeChange(e.target.value)}\r\n                    className={searchStyle['select']} //TODO implement css\r\n                >\r\n                    <option value=\"ngos\">Filter NGOs</option>\r\n                    <option value=\"opportunities\">Filter volunteering</option>\r\n                </select>\r\n                {selectedTags.length > 0 && (\r\n                    <ul className={searchStyle['selected-tags']}>\r\n                        {selectedTags.map(tag => (\r\n                            <li key={tag}>\r\n                                {tag}\r\n                                <button onClick={() => onRemove(tag)}>X</button>\r\n                            </li>\r\n                        ))}\r\n                    </ul>\r\n                )}\r\n                <div className={searchStyle['tag-options']}>\r\n                    {availableTags.map(tag => (\r\n                        <button key={tag} onClick={() => onTagClick(tag)}>\r\n                            {tag}\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n            </aside>\r\n    )\r\n}\r\n\r\nexport default SearchPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}