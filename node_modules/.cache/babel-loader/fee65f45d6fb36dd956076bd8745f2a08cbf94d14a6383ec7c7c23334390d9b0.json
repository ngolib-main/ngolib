{"ast":null,"code":"var _jsxFileName = \"/home/javi/Server/src/components/reusable/Header.js\",\n  _s = $RefreshSig$();\n/*\r\n *  There are 2 base tabs: Donate and Home\r\n *  Plus another two conditional ones based on the cookie from /api/auth/me\r\n *  If a user is logged in, then two extra tabs are displayed:\r\n *  Profile and Log out\r\n *  Depending on the user type (\"user\", \"NGO\" or \"admin\") the Profile link redirects to\r\n *  different kind of progile pages.\r\n */\n\nimport * as React from 'react';\nimport { useState, useEffect } from \"react\";\n// TODO: Third: Depends on outcome of Second. To delete or not to delete (the below line)?\nimport { useNavigate } from \"react-router-dom\";\nimport headerStyle from \"../../style/reusable/header.module.css\";\nimport Sidebar from \"./Sidebar\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Header() {\n  _s();\n  // Retrieve any cookie data after/if the user is logged in.\n  const [user, setUser] = useState(null);\n  // TODO: Second: Depends on outcome of First. To delete or not to delete (the below line)?\n  const navigate = useNavigate();\n\n  // Retrieves the cookie to check whether there is any user logged in.\n  useEffect(() => {\n    fetch(\"/api/auth/me\", {\n      credentials: \"include\"\n    }).then(res => res.ok ? res.json() : Promise.reject(\"Not logged in\")).then(data => setUser(data)).catch(err => {\n      console.log(\"User not logged in:\", err);\n    });\n  }, []);\n\n  // Function lo Logout.\n  const handleLogout = async () => {\n    try {\n      await fetch(\"/api/auth/logout\", {\n        method: \"POST\",\n        credentials: \"include\"\n      });\n      setUser(null);\n      // TODO: First: What to do after logging out? Redirect to Login or stay in the current page?\n      navigate(\"/home\"); // Redirect to login or homepage\n    } catch (err) {\n      console.error(\"Logout failed:\", err);\n    }\n  };\n\n  // Decide profile path based on user type\n  let profileTab;\n  if (!user) {\n    profileTab = {\n      label: 'Log In',\n      path: '/login'\n    };\n  } else {\n    let path = '/home';\n    if (user.type === 'NGO') path = '/profile';else if (user.type === 'user') path = '/user';else if (user.type === 'admin') path = '/admin';\n    profileTab = {\n      label: 'Profile',\n      path\n    };\n  }\n\n  // Base tabs\n  const tabs = [{\n    label: 'Donate',\n    path: '/search'\n  }, {\n    label: 'Home',\n    path: '/home'\n  }, profileTab];\n\n  // If user is logged in, add logout as a clickable tab\n  if (user) {\n    tabs.push({\n      label: 'Log out',\n      action: handleLogout // Sidebar must support actions (see note below)\n    });\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: headerStyle.header,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: headerStyle[\"header-content\"],\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: \"/logo.png\",\n        alt: \"Charity logo\",\n        className: headerStyle[\"logo-image\"]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: headerStyle[\"header-title\"],\n        children: \"NGOLib\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Sidebar, {\n        tabs: tabs,\n        children: user && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: headerStyle[\"header-user\"],\n          children: [\"Hello, \", user.name || user.email]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 9\n  }, this);\n}\n_s(Header, \"/48TlfV0adSMEvsbW2gk5sMeopI=\", false, function () {\n  return [useNavigate];\n});\n_c = Header;\nexport default Header;\nvar _c;\n$RefreshReg$(_c, \"Header\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","headerStyle","Sidebar","jsxDEV","_jsxDEV","Header","_s","user","setUser","navigate","fetch","credentials","then","res","ok","json","Promise","reject","data","catch","err","console","log","handleLogout","method","error","profileTab","label","path","type","tabs","push","action","className","header","children","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","name","email","_c","$RefreshReg$"],"sources":["/home/javi/Server/src/components/reusable/Header.js"],"sourcesContent":["/*\r\n *  There are 2 base tabs: Donate and Home\r\n *  Plus another two conditional ones based on the cookie from /api/auth/me\r\n *  If a user is logged in, then two extra tabs are displayed:\r\n *  Profile and Log out\r\n *  Depending on the user type (\"user\", \"NGO\" or \"admin\") the Profile link redirects to\r\n *  different kind of progile pages.\r\n */\r\n\r\nimport * as React from 'react';\r\nimport {useState, useEffect} from \"react\";\r\n// TODO: Third: Depends on outcome of Second. To delete or not to delete (the below line)?\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport headerStyle from \"../../style/reusable/header.module.css\"\r\nimport Sidebar from \"./Sidebar\";\r\n\r\nfunction Header() {\r\n\r\n    // Retrieve any cookie data after/if the user is logged in.\r\n    const [user, setUser] = useState(null);\r\n    // TODO: Second: Depends on outcome of First. To delete or not to delete (the below line)?\r\n    const navigate = useNavigate();\r\n\r\n    // Retrieves the cookie to check whether there is any user logged in.\r\n    useEffect(() => {\r\n        fetch(\"/api/auth/me\", {\r\n            credentials: \"include\"\r\n        })\r\n            .then(res => res.ok ? res.json() : Promise.reject(\"Not logged in\"))\r\n            .then(data => setUser(data))\r\n            .catch(err => {\r\n                console.log(\"User not logged in:\", err);\r\n            });\r\n    }, []);\r\n\r\n    // Function lo Logout.\r\n    const handleLogout = async () => {\r\n        try {\r\n            await fetch(\"/api/auth/logout\", {\r\n                method: \"POST\",\r\n                credentials: \"include\"\r\n            });\r\n            setUser(null);\r\n            // TODO: First: What to do after logging out? Redirect to Login or stay in the current page?\r\n            navigate(\"/home\"); // Redirect to login or homepage\r\n        } catch (err) {\r\n            console.error(\"Logout failed:\", err);\r\n        }\r\n    };\r\n\r\n    // Decide profile path based on user type\r\n    let profileTab;\r\n    if (!user) {\r\n        profileTab = { label: 'Log In', path: '/login' };\r\n    } else {\r\n        let path = '/home';\r\n        if (user.type === 'NGO') path = '/profile';\r\n        else if (user.type === 'user') path = '/user';\r\n        else if (user.type === 'admin') path = '/admin';\r\n        profileTab = { label: 'Profile', path };\r\n    }\r\n\r\n    // Base tabs\r\n    const tabs = [\r\n        { label: 'Donate', path: '/search' },\r\n        { label: 'Home', path: '/home' },\r\n        profileTab\r\n    ];\r\n\r\n    // If user is logged in, add logout as a clickable tab\r\n    if (user) {\r\n        tabs.push({\r\n            label: 'Log out',\r\n            action: handleLogout // Sidebar must support actions (see note below)\r\n        });\r\n    }\r\n\r\n    return (\r\n        <div className={headerStyle.header}>\r\n            <div className={headerStyle[\"header-content\"]}>\r\n                <img\r\n                    src=\"/logo.png\"\r\n                    alt=\"Charity logo\"\r\n                    className={headerStyle[\"logo-image\"]}\r\n                />\r\n                <h1 className={headerStyle[\"header-title\"]}>NGOLib</h1>\r\n                <Sidebar tabs={tabs}>\r\n                    {user && (\r\n                        <div className={headerStyle[\"header-user\"]}>\r\n                            Hello, {user.name || user.email}\r\n                        </div>\r\n                    )}\r\n                </Sidebar>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Header;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}